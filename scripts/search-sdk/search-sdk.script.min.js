!function(){"use strict";let n={apiEndpoint:null,collectionId:null,debounceDelay:300,minSearchLength:2,openMode:"iframe",enableKeyboardShortcut:!0},e=null,r=null,t=null,o=null,a=!1,s=null,i=!1,c=!1;function d(){t.innerHTML='\n      <div class="docstar-search-empty">\n        <svg class="docstar-search-empty-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">\n          <circle cx="11" cy="11" r="8"></circle>\n          <path d="m21 21-4.35-4.35"></path>\n        </svg>\n        <p>Start typing to search...</p>\n      </div>\n    '}window.handleResultClick=function(e,r){r.preventDefault();const t=n.openMode;"iframe"===t?function(n){s||function(){const n='\n      <div id="docstar-iframe-sidebar" class="docstar-iframe-sidebar">\n        <div class="docstar-iframe-header">\n          <div class="docstar-iframe-actions">\n            <button class="docstar-iframe-new-tab" onclick="openCurrentIframeInNewTab()" aria-label="Open in new tab">\n              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>\n                <polyline points="15,3 21,3 21,9"></polyline>\n                <line x1="10" y1="14" x2="21" y2="3"></line>\n              </svg>\n              New Tab\n            </button>\n            <button class="docstar-iframe-close" onclick="closeIframeSidebar()" aria-label="Close preview">\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                <line x1="18" y1="6" x2="6" y2="18"></line>\n                <line x1="6" y1="6" x2="18" y2="18"></line>\n              </svg>\n            </button>\n          </div>\n        </div>\n        <iframe id="docstar-iframe-content" class="docstar-iframe-content" src="about:blank"></iframe>\n      </div>\n    ',e=document.createElement("div");e.innerHTML=n,document.body.appendChild(e.firstElementChild),s=document.getElementById("docstar-iframe-sidebar")}();document.getElementById("docstar-iframe-content").src=n,s.classList.add("open"),i=!0,document.body.style.paddingRight="30%"}(e):"newTab"===t?window.open(e,"_blank"):"currentTab"===t&&(window.location.href=e),b()},window.openCurrentIframeInNewTab=function(){const n=document.getElementById("docstar-iframe-content");n&&n.src&&"about:blank"!==n.src&&window.open(n.src,"_blank")},window.closeIframeSidebar=function(){s&&(s.classList.remove("open"),i=!1,document.body.style.paddingRight="",setTimeout(()=>{const n=document.getElementById("docstar-iframe-content");n&&(n.src="about:blank")},300))};const l=(p=async e=>{if(e.length<n.minSearchLength)return void d();t.innerHTML='\n      <div class="docstar-search-loading">\n        <div class="docstar-search-spinner"></div>\n        <span>Searching...</span>\n      </div>\n    ';const r=await async function(e){try{const r=await fetch(n.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionId:n.collectionId,searchTerm:e})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(n){return console.error("Search API error:",n),null}}(e);!function(n,e){if(!n||!n.links||!Array.isArray(n.links))return void(t.innerHTML=`\n        <div class="docstar-search-no-results">\n          <p>No results found for "${e}"</p>\n        </div>\n      `);const r=n.links;if(0===r.length)return void(t.innerHTML=`\n        <div class="docstar-search-no-results">\n          <p>No results found for "${e}"</p>\n        </div>\n      `);const o=r.map((n,e)=>{const r=n.link||"#";return`\n        <div class="docstar-search-result-item" data-index="${e}" data-url="${r}" onclick="handleResultClick('${r}', event)">\n          <svg class="docstar-search-result-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>\n            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>\n          </svg>\n          <div class="docstar-search-result-content">\n            <div class="docstar-search-result-title">${n.name||"Untitled"}</div>\n            <div class="docstar-search-result-url">${r}</div>\n          </div>\n        </div>\n      `}).join("");t.innerHTML=o}(r,e)},h=n.debounceDelay,function(...n){clearTimeout(o),o=setTimeout(()=>p.apply(this,n),h)});var p,h;function u(n){const e=n.target.value.trim();""!==e?l(e):d()}function f(){c?a||(a=!0,e.classList.add("open"),document.body.style.overflow="hidden",setTimeout(()=>{r.focus()},100)):console.error("DocStar Search SDK: Configuration required. Please call window.DocStarSearch.configure() with apiEndpoint, collectionId, and openMode.")}function b(){a&&(a=!1,e.classList.remove("open"),document.body.style.overflow="",r.value="",d())}function m(e){if(n.enableKeyboardShortcut&&(e.metaKey||e.ctrlKey)&&"k"===e.key)return e.preventDefault(),c?void f():void console.error("DocStar Search SDK: Configuration required. Please call window.DocStarSearch.configure() with apiEndpoint, collectionId, and openMode.");a&&"Escape"===e.key&&(e.preventDefault(),b()),i&&"Escape"===e.key&&(e.preventDefault(),closeIframeSidebar())}function g(){!function(){const n=document.createElement("style");n.textContent="\n      .docstar-search-modal {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        z-index: 999999;\n        display: none;\n        align-items: flex-start;\n        justify-content: center;\n        padding-top: 10vh;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      }\n\n      .docstar-search-modal.open {\n        display: flex;\n      }\n\n      .docstar-search-backdrop {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.6);\n        backdrop-filter: blur(8px);\n        -webkit-backdrop-filter: blur(8px);\n      }\n\n      .docstar-search-container {\n        position: relative;\n        width: 90%;\n        max-width: 600px;\n        background: white;\n        border-radius: 12px;\n        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n        overflow: hidden;\n        animation: docstar-modal-enter 0.2s ease-out;\n      }\n\n      @keyframes docstar-modal-enter {\n        from {\n          opacity: 0;\n          transform: scale(0.95) translateY(-10px);\n        }\n        to {\n          opacity: 1;\n          transform: scale(1) translateY(0);\n        }\n      }\n\n      .docstar-search-header {\n        border-bottom: 1px solid #e5e7eb;\n        padding: 0;\n      }\n\n      .docstar-search-input-wrapper {\n        display: flex;\n        align-items: center;\n        padding: 16px 20px;\n        gap: 12px;\n      }\n\n      .docstar-search-icon {\n        color: #6b7280;\n        flex-shrink: 0;\n      }\n\n      .docstar-search-input {\n        flex: 1;\n        border: none;\n        outline: none;\n        font-size: 16px;\n        color: #111827;\n        background: transparent;\n      }\n\n      .docstar-search-input::placeholder {\n        color: #9ca3af;\n      }\n\n      .docstar-search-close {\n        background: none;\n        border: none;\n        padding: 4px;\n        cursor: pointer;\n        color: #6b7280;\n        border-radius: 4px;\n        transition: all 0.2s;\n      }\n\n      .docstar-search-close:hover {\n        background: #f3f4f6;\n        color: #374151;\n      }\n\n      .docstar-search-body {\n        max-height: 400px;\n        overflow-y: auto;\n      }\n\n      .docstar-search-results {\n        padding: 8px 0;\n      }\n\n      .docstar-search-empty {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        padding: 40px 20px;\n        color: #6b7280;\n        text-align: center;\n      }\n\n      .docstar-search-empty-icon {\n        margin-bottom: 12px;\n        opacity: 0.5;\n      }\n\n      .docstar-search-empty p {\n        margin: 0;\n        font-size: 14px;\n      }\n\n      .docstar-search-result-item {\n        display: flex;\n        align-items: center;\n        padding: 12px 20px;\n        cursor: pointer;\n        transition: background-color 0.15s;\n        text-decoration: none;\n        color: inherit;\n        border-left: 3px solid transparent;\n      }\n\n      .docstar-search-result-item:hover,\n      .docstar-search-result-item.highlighted {\n        background: #f8fafc;\n        border-left-color: #3b82f6;\n      }\n\n      .docstar-search-result-icon {\n        width: 20px;\n        height: 20px;\n        margin-right: 12px;\n        color: #6b7280;\n        flex-shrink: 0;\n      }\n\n      .docstar-search-result-content {\n        flex: 1;\n        min-width: 0;\n      }\n\n      .docstar-search-result-title {\n        font-size: 14px;\n        font-weight: 500;\n        color: #111827;\n        margin: 0 0 2px 0;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .docstar-search-result-url {\n        font-size: 12px;\n        color: #6b7280;\n        margin: 0;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .docstar-search-loading {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 20px;\n        color: #6b7280;\n      }\n\n      .docstar-search-spinner {\n        width: 20px;\n        height: 20px;\n        border: 2px solid #e5e7eb;\n        border-top: 2px solid #3b82f6;\n        border-radius: 50%;\n        animation: docstar-spin 1s linear infinite;\n        margin-right: 8px;\n      }\n\n      @keyframes docstar-spin {\n        to {\n          transform: rotate(360deg);\n        }\n      }\n\n      .docstar-search-footer {\n        border-top: 1px solid #e5e7eb;\n        padding: 12px 20px;\n        background: #f9fafb;\n      }\n\n      .docstar-search-shortcuts {\n        display: flex;\n        gap: 16px;\n        font-size: 12px;\n        color: #6b7280;\n      }\n\n      .docstar-search-shortcut kbd {\n        background: white;\n        border: 1px solid #d1d5db;\n        border-radius: 3px;\n        padding: 2px 6px;\n        font-size: 11px;\n        font-family: inherit;\n        margin: 0 2px;\n      }\n\n      .docstar-search-no-results {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        padding: 40px 20px;\n        color: #6b7280;\n        text-align: center;\n      }\n\n      .docstar-search-no-results p {\n        margin: 0;\n        font-size: 14px;\n      }\n\n\n      .docstar-iframe-sidebar {\n        position: fixed;\n        top: 0;\n        right: -30%;\n        width: 30%;\n        height: 100vh;\n        background: white;\n        box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);\n        z-index: 999998;\n        transition: right 0.3s ease;\n        border-left: 1px solid #e5e7eb;\n      }\n\n      .docstar-iframe-sidebar.open {\n        right: 0;\n      }\n\n      .docstar-iframe-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 16px 20px;\n        border-bottom: 1px solid #e5e7eb;\n        background: #f9fafb;\n      }\n\n      .docstar-iframe-actions {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .docstar-iframe-new-tab {\n        background: #3b82f6;\n        color: white;\n        border: none;\n        padding: 6px 12px;\n        border-radius: 4px;\n        font-size: 12px;\n        cursor: pointer;\n        transition: all 0.2s;\n        display: flex;\n        align-items: center;\n        gap: 4px;\n      }\n\n      .docstar-iframe-new-tab:hover {\n        background: #2563eb;\n      }\n\n      .docstar-iframe-title {\n        font-size: 14px;\n        font-weight: 600;\n        color: #374151;\n        margin: 0;\n      }\n\n      .docstar-iframe-close {\n        background: none;\n        border: none;\n        padding: 4px;\n        cursor: pointer;\n        color: #6b7280;\n        border-radius: 4px;\n        transition: all 0.2s;\n      }\n\n      .docstar-iframe-close:hover {\n        background: #e5e7eb;\n        color: #374151;\n      }\n\n      .docstar-iframe-content {\n        width: 100%;\n        height: calc(100vh - 60px);\n        border: none;\n      }\n\n      .docstar-iframe-sidebar.open ~ .docstar-search-modal {\n        padding-right: 30%;\n      }\n    ",document.head.appendChild(n)}();const n=document.createElement("div");n.innerHTML='\n      <div id="docstar-search-modal" class="docstar-search-modal">\n        <div class="docstar-search-backdrop"></div>\n        <div class="docstar-search-container">\n          <div class="docstar-search-header">\n            <div class="docstar-search-input-wrapper">\n              <svg class="docstar-search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                <circle cx="11" cy="11" r="8"></circle>\n                <path d="m21 21-4.35-4.35"></path>\n              </svg>\n              <input \n                type="text" \n                id="docstar-search-input" \n                class="docstar-search-input" \n                placeholder="Search anything..."\n                autocomplete="off"\n                spellcheck="false"\n              />\n              <button class="docstar-search-close" aria-label="Close search">\n                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                  <line x1="18" y1="6" x2="6" y2="18"></line>\n                  <line x1="6" y1="6" x2="18" y2="18"></line>\n                </svg>\n              </button>\n            </div>\n          </div>\n          <div class="docstar-search-body">\n            <div id="docstar-search-results" class="docstar-search-results">\n              <div class="docstar-search-empty">\n                <svg class="docstar-search-empty-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">\n                  <circle cx="11" cy="11" r="8"></circle>\n                  <path d="m21 21-4.35-4.35"></path>\n                </svg>\n                <p>Start typing to search...</p>\n              </div>\n            </div>\n          </div>\n          <div class="docstar-search-footer">\n            <div class="docstar-search-shortcuts">\n              <span class="docstar-search-shortcut">\n                <kbd>↑</kbd><kbd>↓</kbd> Navigate\n              </span>\n              <span class="docstar-search-shortcut">\n                <kbd>Enter</kbd> Select\n              </span>\n              <span class="docstar-search-shortcut">\n                <kbd>Esc</kbd> Close\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    ',document.body.appendChild(n.firstElementChild),e=document.getElementById("docstar-search-modal"),r=document.getElementById("docstar-search-input"),t=document.getElementById("docstar-search-results"),r.addEventListener("input",u);e.querySelector(".docstar-search-close").addEventListener("click",b);e.querySelector(".docstar-search-backdrop").addEventListener("click",b);e.querySelector(".docstar-search-container").addEventListener("click",n=>{n.stopPropagation()}),document.addEventListener("keydown",m),window.addEventListener("openPublicSearchBar",()=>{c?f():console.error("DocStar Search SDK: Configuration required. Please call window.DocStarSearch.configure() with apiEndpoint, collectionId, and openMode.")})}window.DocStarSearch={init:function(n={}){g()},open:f,close:b,configure:function(e){if(!e.apiEndpoint)throw new Error("DocStar Search SDK: apiEndpoint is required");if(!e.collectionId)throw new Error("DocStar Search SDK: collectionId is required");if(!e.openMode)throw new Error("DocStar Search SDK: openMode is required (iframe, newTab, or currentTab)");if(!["iframe","newTab","currentTab"].includes(e.openMode))throw new Error("DocStar Search SDK: openMode must be one of: iframe, newTab, currentTab");Object.assign(n,e),c=!0,console.log("DocStar Search SDK: Configuration successful")}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.DocStarSearch.init()}):window.DocStarSearch.init()}();